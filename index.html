<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  <script src="http://10.0.33.253:8081/libs/js/cordova/2.7.0/cordova.webos.js"></script>
    <script
      type="text/javascript"
      src="http://10.0.33.253:8081/libs/custom.js"
    ></script> 
  </head>
  <body>
    <h1>Master Screen - Video Sync</h1>
    <video id="masterVideo" src="http://10.0.33.253:8081/mineClip.mp4" preload="auto" muted loop type="video/mp4">
    </video>

    <script>
      let video = document.getElementById("masterVideo");
      //video.muted = true;

      const syncData = () => {
        console.log("syncCalled");
        const successCallback = function (successObject) {
          console.log("Basetime is : " + successObject.basetime);
        };

        const failureCallback = function (failureObject) {
          console.log("failure callback");
          console.error(
            "[" + failureObject.errorCode + "] " + failureObject.errorText
          );
        };

        // Sets the master signage device.
        var custom = new Custom();
        custom.VideoSync.setMaster(successCallback, failureCallback, {
          ip: "10.0.34.94",
          port: 8081,
          //Optional property when there are multiple video tags.
          videoElement: video,
        });
        
      };

       //syncData();
       video.onloadeddata = function () {
        console.log('call onload');
        //syncData();
        video.play();
      }


      // video.addEventListener('ended', ()=>{
      //   console.log("video terminou");
      //   //video.currentTime = 0;
      //   video.play();
      // });
    </script>
  </body>
</html>
